##############################
# Separatist 1 Faction
##############################

planet_separatist_1 = {
	election_header = "GFX_faction_header_yellow"
	guiding_ethic = ethic_militarist # Irrelevant for Separatists factions
	use_guiding_ethic_as_pop_filter = no #this means that the faction will let pops that aren't militarist in too

	unique = yes
	support_multiplier = 1

	resources = {
		category = pop_factions
		produces = {
			unity = -0.25
		}
	}

	is_potential = {
		years_passed >= 5
		# Note: define POP_FACTION_MIN_POTENTIAL_MEMBERS
		any_owned_planet = {
			is_same_value = event_target:p_separatist_1
		}	
	}

	parameters = {
		empire = {
			type = country
			valid_objects = {
				is_same_value = root
			}
		}
	}

	can_join_pre_triggers = {
		is_enslaved = no
		is_being_purged = no
	}

	can_join_faction = {
		planet = {
			is_same_value = event_target:p_separatist_1
		}
		OR = {
			has_pop_flag = sep_pop 			# Just Generally Nationalist
			# has_pop_flag = sep_pop_nat 		# Nationalist for former nation
			has_pop_flag = sep_pop_spec 	# Nationalist due to species reasons
			has_pop_flag = sep_pop_ethic 	# Nationalist due to Ethics reasons
		}
		is_shackled_robot = no
		NOR = { 
			has_trait = trait_nerve_stapled
			has_trait = trait_zombie
		}
	}

	attraction = {
		base = 115

		modifier = {
			factor = 1.3
			exists = from
			from = {
				exists = leader
				leader = { leader_class = ruler }
			}
		}

		modifier = {
			factor = 0.25
			exists = from
			from = {
				NOT = { exists = leader }
			}
		}

		modifier = {
			factor = 0.9
			has_citizenship_type = { type = citizenship_full }
		}


		modifier = { #Outcasts and radicals
			factor = 1.5
			OR = {
				NOT = { is_same_species = owner_species }
				NOT = { has_citizenship_type = { type = citizenship_full } }
				has_trait = trait_unruly
			}
		}
	}

	leader = {
		base = 0

		# Leader is manually assigned, will either be:
		#	- Governor of that sector
		#	- Random Separatist?
		#	- Admiral within that sector?
	}

	# Independence
	demand = {
		title = "SEPARATISM_DEMAND_IND_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_IND_p_1"
		desc = "SEPARATISM_DEMAND_IND_p_1_desc"

		unfulfilled_effect = -30
		fulfilled_effect = 0.001

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
			}
		}

		trigger = {
			owner = {
				NOR = {
					any_owned_planet = {
						is_same_value = event_target:p_separatist_1
					}
				}
			}
		}
	}

	# No Military Personnel Jobs
	demand = {
		title = "SEPARATISM_DEMAND_MIL_JOBS_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_MIL_JOBS_p_1"
		desc = "SEPARATISM_DEMAND_MIL_JOBS_p_1_desc"

		unfulfilled_effect = -5
		fulfilled_effect = 2

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				NOR = {
					has_available_jobs = soldier
					has_available_jobs = warrior_drone
					num_assigned_jobs = {
						job = soldier
						value >= 1
					}
					num_assigned_jobs = {
						job = warrior_drone
						value >= 1
					}
				}
			}
		}
	}

	# Military Personnel Exist - 1
	demand = {
		title = "SEPARATISM_DEMAND_MIL_JOBS_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_MIL_JOBS_p_1"
		desc = "SEPARATISM_DEMAND_MIL_JOBS_p_1_desc"

		unfulfilled_effect = -5
		fulfilled_effect = 0.001

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				OR = {
					num_assigned_jobs = {
						job = soldier
						value = 1
					}
					num_assigned_jobs = {
						job = warrior_drone
						value = 1
					}
				}
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				NOR = {
					num_assigned_jobs = {
						job = soldier
						value = 1
					}
					num_assigned_jobs = {
						job = warrior_drone
						value = 1
					}
				}
			}
		}
	}

	# Military Personnel Exist - 2
	demand = {
		title = "SEPARATISM_DEMAND_MIL_JOBS_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_MIL_JOBS_p_1"
		desc = "SEPARATISM_DEMAND_MIL_JOBS_p_1_desc"

		unfulfilled_effect = -10
		fulfilled_effect = 0.001

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				OR = {
					num_assigned_jobs = {
						job = soldier
						value = 2
					}
					num_assigned_jobs = {
						job = warrior_drone
						value = 2
					}
				}
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				NOR = {
					num_assigned_jobs = {
						job = soldier
						value = 2
					}
					num_assigned_jobs = {
						job = warrior_drone
						value = 2
					}
				}
			}
		}
	}

	# Military Personnel Exist - 3
	demand = {
		title = "SEPARATISM_DEMAND_MIL_JOBS_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_MIL_JOBS_p_1"
		desc = "SEPARATISM_DEMAND_MIL_JOBS_p_1_desc"

		unfulfilled_effect = -15
		fulfilled_effect = 0.001

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				OR = {
					num_assigned_jobs = {
						job = soldier
						value >= 3
					}
					num_assigned_jobs = {
						job = warrior_drone
						value >= 3
					}
				}
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				NOR = {
					num_assigned_jobs = {
						job = soldier
						value >= 3
					}
					num_assigned_jobs = {
						job = warrior_drone
						value >= 3
					}
				}
			}
		}
	}

	# No Military Buildings
	demand = {
		title = "SEPARATISM_DEMAND_MIL_BUILD_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_MIL_BUILD_p_1"
		desc = "SEPARATISM_DEMAND_MIL_BUILD_p_1_desc"

		unfulfilled_effect = -20
		fulfilled_effect = 5

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				OR = {
					has_building = building_military_academy
					has_building = building_dread_encampment
					has_building = building_stronghold
					has_building = building_fortress
				}
			}
		}
	}

	# Desire Planetary Shield Generator
	# Reasoning: In case they rebel, protection from enemies
	demand = {
		title = "SEPARATISM_DEMAND_SHIELD_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_SHIELD_p_1"
		desc = "SEPARATISM_DEMAND_SHIELD_p_1_desc"

		unfulfilled_effect = -5
		fulfilled_effect = 10

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
					has_technology = tech_planetary_shield_generator
				}
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				has_building = building_planetary_shield_generator
			}
		}
	}

	# Federal Government Policy - Ethics and Civics
	demand = {
		title = "SEPARATISM_DEMAND_FEDERAL_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_FEDERAL_p_1"
		desc = "SEPARATISM_DEMAND_FEDERAL_p_1_desc"

		unfulfilled_effect = -10
		fulfilled_effect = 5

		potential = {
			has_global_flag = cultural_overhaul_active

			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
			}
		}

		trigger = {
			owner = {
				has_policy_flag = federal_state
			}
		}
	}

	# Economic 
	demand = {
		title = "SEPARATISM_DEMAND_FINANCE_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_FINANCE_p_1"
		desc = "SEPARATISM_DEMAND_FINANCE_p_1_desc"

		unfulfilled_effect = -20
		fulfilled_effect = 0.001

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				NOR = {
					has_planet_flag = 10_taxes
					has_planet_flag = 20_taxes
					has_planet_flag = 30_taxes
					has_planet_flag = 40_taxes
					has_planet_flag = 50_taxes
					has_planet_flag = 60_taxes
					has_planet_flag = 70_taxes
					has_planet_flag = 80_taxes
					has_planet_flag = 90_taxes
				}
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				OR = {
					has_planet_flag = 10_taxes
					has_planet_flag = 20_taxes
					has_planet_flag = 30_taxes
					has_planet_flag = 40_taxes
					has_planet_flag = 50_taxes
					has_planet_flag = 60_taxes
					has_planet_flag = 70_taxes
					has_planet_flag = 80_taxes
					has_planet_flag = 90_taxes
				}
			}
		}
	}

	# Economic 1
	demand = {
		title = "SEPARATISM_DEMAND_FINANCE_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_FINANCE_p_1"
		desc = "SEPARATISM_DEMAND_FINANCE_p_1_desc"

		unfulfilled_effect = 0.001
		fulfilled_effect = 2

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				has_planet_flag = 10_taxes
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				has_planet_flag = 10_taxes
			}
		}
	}

	# Economic 2
	demand = {
		title = "SEPARATISM_DEMAND_FINANCE_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_FINANCE_p_1"
		desc = "SEPARATISM_DEMAND_FINANCE_p_1_desc"

		unfulfilled_effect = 0.001
		fulfilled_effect = 4

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				has_planet_flag = 20_taxes
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				has_planet_flag = 20_taxes
			}
		}
	}

	# Economic 3
	demand = {
		title = "SEPARATISM_DEMAND_FINANCE_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_FINANCE_p_1"
		desc = "SEPARATISM_DEMAND_FINANCE_p_1_desc"

		unfulfilled_effect = 0.001
		fulfilled_effect = 6

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				has_planet_flag = 30_taxes
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				has_planet_flag = 30_taxes
			}
		}
	}

	# Economic 4
	demand = {
		title = "SEPARATISM_DEMAND_FINANCE_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_FINANCE_p_1"
		desc = "SEPARATISM_DEMAND_FINANCE_p_1_desc"

		unfulfilled_effect = 0.001
		fulfilled_effect = 8

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				has_planet_flag = 40_taxes
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				has_planet_flag = 40_taxes
			}
		}
	}

	# Economic 5
	demand = {
		title = "SEPARATISM_DEMAND_FINANCE_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_FINANCE_p_1"
		desc = "SEPARATISM_DEMAND_FINANCE_p_1_desc"

		unfulfilled_effect = 0.001
		fulfilled_effect = 10

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				has_planet_flag = 50_taxes
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				has_planet_flag = 50_taxes
			}
		}
	}

	# Economic 6
	demand = {
		title = "SEPARATISM_DEMAND_FINANCE_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_FINANCE_p_1"
		desc = "SEPARATISM_DEMAND_FINANCE_p_1_desc"

		unfulfilled_effect = 0.001
		fulfilled_effect = 12

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				has_planet_flag = 60_taxes
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				has_planet_flag = 60_taxes
			}
		}
	}

	# Economic 7
	demand = {
		title = "SEPARATISM_DEMAND_FINANCE_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_FINANCE_p_1"
		desc = "SEPARATISM_DEMAND_FINANCE_p_1_desc"

		unfulfilled_effect = 0.001
		fulfilled_effect = 14

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				has_planet_flag = 70_taxes
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				has_planet_flag = 70_taxes
			}
		}
	}

	# Economic 8
	demand = {
		title = "SEPARATISM_DEMAND_FINANCE_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_FINANCE_p_1"
		desc = "SEPARATISM_DEMAND_FINANCE_p_1_desc"

		unfulfilled_effect = 0.001
		fulfilled_effect = 16

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				has_planet_flag = 80_taxes
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				has_planet_flag = 80_taxes
			}
		}
	}

	# Economic 9
	demand = {
		title = "SEPARATISM_DEMAND_FINANCE_p_1"
		unfulfilled_title = "SEPARATISM_DEMAND_FINANCE_p_1"
		desc = "SEPARATISM_DEMAND_FINANCE_p_1_desc"

		unfulfilled_effect = 0.001
		fulfilled_effect = 18

		potential = {
			exists = event_target:p_separatist_1
			event_target:p_separatist_1 = {
				owner = {
					is_same_value = root.owner
				}
				has_planet_flag = 90_taxes
			}
		}

		trigger = {
			event_target:p_separatist_1 = {
				has_planet_flag = 90_taxes
			}
		}
	}

	on_create = {
		event_target:p_separatist_1 = {
			set_planet_flag = p_separatist_1
		}
		pop_faction_event = { id = civtest.4000 }
	}

	on_destroy = {
		# if = {
		# 	limit = {
		# 		has_modifier = promoted_militarist
		# 	}
		# 	remove_modifier = promoted_militarist
		# }
		# if = {
		# 	limit = {
		# 		has_modifier = suppressed_militarist
		# 	}
		# 	remove_modifier = suppressed_militarist
		# }
	}

	actions = {
		suppress_faction = {
			title = "SUPPRESS_FACTION"
			description = "SUPPRESS_FACTION_DESC"

			potential = {
				exists = owner
				parameter:empire = {
					NOR = {
						has_modifier = suppressed_militarist
						has_modifier = promoted_militarist
					}
				}
			}

			effect = {
				add_modifier = { modifier = suppressed_faction days = -1 }
				parameter:empire = {
					add_modifier = { modifier = suppressed_militarist days = -1 }
				}
			}

			ai_weight = {
				base = 0
			}
		}
		cancel_suppress_faction = {
			title = "CANCEL_SUPPRESS_FACTION"
			description = "CANCEL_SUPPRESS_FACTION_DESC"

			potential = {
				exists = owner
				parameter:empire = { has_modifier = suppressed_militarist }
			}

			effect = {
				remove_modifier = suppressed_faction
				parameter:empire = {
					remove_modifier = suppressed_militarist
				}
			}

			ai_weight = {
				base = 0
			}
		}
	}
}
