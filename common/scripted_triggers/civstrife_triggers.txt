has_democratic_elections = {
	NOT = { has_civic = civic_shadow_council }
	OR = {
		has_authority = auth_democratic
		has_authority = auth_strict_democratic
		has_authority = auth_democratic_dictatorship
		####
		has_authority = auth_direct_democratic
		has_authority = auth_bugged_direct_democratic
		has_authority = auth_bugged_corporate_democratic
		has_authority = auth_corporate_democratic
		has_authority = auth_cooperative
	}
}

check_civwar_capital = {
	NOT = {
		any_system_planet = {
			is_capital = yes
			owner = { is_primitive = no }
		}
	}
}

is_regular_faction = {
	OR = {
		# Vanilla
		is_pop_faction_type = totalitarian
		is_pop_faction_type = progressive
		is_pop_faction_type = imperialist
		is_pop_faction_type = prosperity
		is_pop_faction_type = technologist
		is_pop_faction_type = traditionalist
		is_pop_faction_type = xenoist
		is_pop_faction_type = supremacist
		is_pop_faction_type = isolationist
		# Ethics and Civics
		is_pop_faction_type = socialists
		is_pop_faction_type = bankers
		is_pop_faction_type = manufacturers
		is_pop_faction_type = environmentalists
		is_pop_faction_type = conservatives
		is_pop_faction_type = labourites
		# Divided Loyalties
		is_pop_faction_type = indentured
		is_pop_faction_type = aristocrat
		is_pop_faction_type = elitist
		is_pop_faction_type = labourite
		is_pop_faction_type = survivalist
		is_pop_faction_type = warmaker
		is_pop_faction_type = activist
		is_pop_faction_type = industrialist
		is_pop_faction_type = perfectionist
		is_pop_faction_type = adopter
		is_pop_faction_type = crusader
		is_pop_faction_type = shepherd
		is_pop_faction_type = holistic
		is_pop_faction_type = warmaker
		is_pop_faction_type = enslaver
	}
}

is_separatist_faction = {
	OR = {
		is_planetary_separatist_faction = yes
		is_sector_separatist_faction = yes
		is_iso_sector_separatist_faction = yes
	}
}

is_planetary_separatist_faction = {
	OR = {
		has_pop_faction_flag = plan_faction
		##########################################
		is_pop_faction_type = "plan_separatist_1"
		is_pop_faction_type = "plan_separatist_2"
		is_pop_faction_type = "plan_separatist_3"
		is_pop_faction_type = "plan_separatist_4"
		is_pop_faction_type = "plan_separatist_5"
		is_pop_faction_type = "plan_separatist_6"
		is_pop_faction_type = "plan_separatist_7"
		is_pop_faction_type = "plan_separatist_8"
		is_pop_faction_type = "plan_separatist_9"
		is_pop_faction_type = "plan_separatist_10"
		is_pop_faction_type = "plan_separatist_12"
		is_pop_faction_type = "plan_separatist_13"
		is_pop_faction_type = "plan_separatist_14"
		is_pop_faction_type = "plan_separatist_15"
		is_pop_faction_type = "plan_separatist_16"
		is_pop_faction_type = "plan_separatist_17"
		is_pop_faction_type = "plan_separatist_18"
		is_pop_faction_type = "plan_separatist_19"
		is_pop_faction_type = "plan_separatist_20"
		is_pop_faction_type = "plan_separatist_21"
		is_pop_faction_type = "plan_separatist_22"
		is_pop_faction_type = "plan_separatist_23"
		is_pop_faction_type = "plan_separatist_24"
		is_pop_faction_type = "plan_separatist_25"
		is_pop_faction_type = "plan_separatist_26"
		is_pop_faction_type = "plan_separatist_27"
		is_pop_faction_type = "plan_separatist_28"
		is_pop_faction_type = "plan_separatist_29"
		is_pop_faction_type = "plan_separatist_30"
		is_pop_faction_type = "plan_separatist_31"
		is_pop_faction_type = "plan_separatist_32"
		is_pop_faction_type = "plan_separatist_33"
		is_pop_faction_type = "plan_separatist_34"
		is_pop_faction_type = "plan_separatist_35"
		is_pop_faction_type = "plan_separatist_36"
		is_pop_faction_type = "plan_separatist_37"
		is_pop_faction_type = "plan_separatist_38"
		is_pop_faction_type = "plan_separatist_39"
		is_pop_faction_type = "plan_separatist_40"
		is_pop_faction_type = "plan_separatist_41"
		is_pop_faction_type = "plan_separatist_42"
		is_pop_faction_type = "plan_separatist_43"
		is_pop_faction_type = "plan_separatist_44"
		is_pop_faction_type = "plan_separatist_45"
		is_pop_faction_type = "plan_separatist_46"
		is_pop_faction_type = "plan_separatist_47"
		is_pop_faction_type = "plan_separatist_48"
		is_pop_faction_type = "plan_separatist_49"
		is_pop_faction_type = "plan_separatist_50"
		is_pop_faction_type = "plan_separatist_51"
		is_pop_faction_type = "plan_separatist_52"
		is_pop_faction_type = "plan_separatist_53"
		is_pop_faction_type = "plan_separatist_54"
		is_pop_faction_type = "plan_separatist_55"
		is_pop_faction_type = "plan_separatist_56"
		is_pop_faction_type = "plan_separatist_57"
		is_pop_faction_type = "plan_separatist_58"
		is_pop_faction_type = "plan_separatist_59"
		is_pop_faction_type = "plan_separatist_60"
		is_pop_faction_type = "plan_separatist_61"
		is_pop_faction_type = "plan_separatist_62"
		is_pop_faction_type = "plan_separatist_63"
		is_pop_faction_type = "plan_separatist_64"
		is_pop_faction_type = "plan_separatist_65"
		is_pop_faction_type = "plan_separatist_66"
		is_pop_faction_type = "plan_separatist_67"
		is_pop_faction_type = "plan_separatist_68"
		is_pop_faction_type = "plan_separatist_69"
		is_pop_faction_type = "plan_separatist_70"
		is_pop_faction_type = "plan_separatist_71"
		is_pop_faction_type = "plan_separatist_72"
		is_pop_faction_type = "plan_separatist_73"
		is_pop_faction_type = "plan_separatist_74"
		is_pop_faction_type = "plan_separatist_75"
		is_pop_faction_type = "plan_separatist_76"
		is_pop_faction_type = "plan_separatist_77"
		is_pop_faction_type = "plan_separatist_78"
		is_pop_faction_type = "plan_separatist_79"
		is_pop_faction_type = "plan_separatist_80"
		is_pop_faction_type = "plan_separatist_81"
		is_pop_faction_type = "plan_separatist_82"
		is_pop_faction_type = "plan_separatist_83"
		is_pop_faction_type = "plan_separatist_84"
		is_pop_faction_type = "plan_separatist_85"
		is_pop_faction_type = "plan_separatist_86"
		is_pop_faction_type = "plan_separatist_87"
		is_pop_faction_type = "plan_separatist_88"
		is_pop_faction_type = "plan_separatist_89"
		is_pop_faction_type = "plan_separatist_90"
		is_pop_faction_type = "plan_separatist_91"
		is_pop_faction_type = "plan_separatist_92"
		is_pop_faction_type = "plan_separatist_93"
		is_pop_faction_type = "plan_separatist_94"
		is_pop_faction_type = "plan_separatist_95"
		is_pop_faction_type = "plan_separatist_96"
		is_pop_faction_type = "plan_separatist_97"
		is_pop_faction_type = "plan_separatist_98"
		is_pop_faction_type = "plan_separatist_99"
		is_pop_faction_type = "plan_separatist_100"
	}
}

is_sector_separatist_faction = {
	OR = {
		has_pop_faction_flag = sector_faction
		##########################################
		is_pop_faction_type = "sec_separatist_1"
		is_pop_faction_type = "sec_separatist_2"
		is_pop_faction_type = "sec_separatist_3"
		is_pop_faction_type = "sec_separatist_4"
		is_pop_faction_type = "sec_separatist_5"
		is_pop_faction_type = "sec_separatist_6"
		is_pop_faction_type = "sec_separatist_7"
		is_pop_faction_type = "sec_separatist_8"
		is_pop_faction_type = "sec_separatist_9"
		is_pop_faction_type = "sec_separatist_10"
		is_pop_faction_type = "sec_separatist_12"
		is_pop_faction_type = "sec_separatist_13"
		is_pop_faction_type = "sec_separatist_14"
		is_pop_faction_type = "sec_separatist_15"
		is_pop_faction_type = "sec_separatist_16"
		is_pop_faction_type = "sec_separatist_17"
		is_pop_faction_type = "sec_separatist_18"
		is_pop_faction_type = "sec_separatist_19"
		is_pop_faction_type = "sec_separatist_20"
		is_pop_faction_type = "sec_separatist_21"
		is_pop_faction_type = "sec_separatist_22"
		is_pop_faction_type = "sec_separatist_23"
		is_pop_faction_type = "sec_separatist_24"
		is_pop_faction_type = "sec_separatist_25"
		is_pop_faction_type = "sec_separatist_26"
		is_pop_faction_type = "sec_separatist_27"
		is_pop_faction_type = "sec_separatist_28"
		is_pop_faction_type = "sec_separatist_29"
		is_pop_faction_type = "sec_separatist_30"
		is_pop_faction_type = "sec_separatist_31"
		is_pop_faction_type = "sec_separatist_32"
		is_pop_faction_type = "sec_separatist_33"
		is_pop_faction_type = "sec_separatist_34"
		is_pop_faction_type = "sec_separatist_35"
		is_pop_faction_type = "sec_separatist_36"
		is_pop_faction_type = "sec_separatist_37"
		is_pop_faction_type = "sec_separatist_38"
		is_pop_faction_type = "sec_separatist_39"
		is_pop_faction_type = "sec_separatist_40"
		is_pop_faction_type = "sec_separatist_41"
		is_pop_faction_type = "sec_separatist_42"
		is_pop_faction_type = "sec_separatist_43"
		is_pop_faction_type = "sec_separatist_44"
		is_pop_faction_type = "sec_separatist_45"
		is_pop_faction_type = "sec_separatist_46"
		is_pop_faction_type = "sec_separatist_47"
		is_pop_faction_type = "sec_separatist_48"
		is_pop_faction_type = "sec_separatist_49"
		is_pop_faction_type = "sec_separatist_50"
		# is_pop_faction_type = "sec_separatist_51"
		# is_pop_faction_type = "sec_separatist_52"
		# is_pop_faction_type = "sec_separatist_53"
		# is_pop_faction_type = "sec_separatist_54"
		# is_pop_faction_type = "sec_separatist_55"
		# is_pop_faction_type = "sec_separatist_56"
		# is_pop_faction_type = "sec_separatist_57"
		# is_pop_faction_type = "sec_separatist_58"
		# is_pop_faction_type = "sec_separatist_59"
		# is_pop_faction_type = "sec_separatist_60"
		# is_pop_faction_type = "sec_separatist_61"
		# is_pop_faction_type = "sec_separatist_62"
		# is_pop_faction_type = "sec_separatist_63"
		# is_pop_faction_type = "sec_separatist_64"
		# is_pop_faction_type = "sec_separatist_65"
		# is_pop_faction_type = "sec_separatist_66"
		# is_pop_faction_type = "sec_separatist_67"
		# is_pop_faction_type = "sec_separatist_68"
		# is_pop_faction_type = "sec_separatist_69"
		# is_pop_faction_type = "sec_separatist_70"
		# is_pop_faction_type = "sec_separatist_71"
		# is_pop_faction_type = "sec_separatist_72"
		# is_pop_faction_type = "sec_separatist_73"
		# is_pop_faction_type = "sec_separatist_74"
		# is_pop_faction_type = "sec_separatist_75"
		# is_pop_faction_type = "sec_separatist_76"
		# is_pop_faction_type = "sec_separatist_77"
		# is_pop_faction_type = "sec_separatist_78"
		# is_pop_faction_type = "sec_separatist_79"
		# is_pop_faction_type = "sec_separatist_80"
		# is_pop_faction_type = "sec_separatist_81"
		# is_pop_faction_type = "sec_separatist_82"
		# is_pop_faction_type = "sec_separatist_83"
		# is_pop_faction_type = "sec_separatist_84"
		# is_pop_faction_type = "sec_separatist_85"
		# is_pop_faction_type = "sec_separatist_86"
		# is_pop_faction_type = "sec_separatist_87"
		# is_pop_faction_type = "sec_separatist_88"
		# is_pop_faction_type = "sec_separatist_89"
		# is_pop_faction_type = "sec_separatist_90"
		# is_pop_faction_type = "sec_separatist_91"
		# is_pop_faction_type = "sec_separatist_92"
		# is_pop_faction_type = "sec_separatist_93"
		# is_pop_faction_type = "sec_separatist_94"
		# is_pop_faction_type = "sec_separatist_95"
		# is_pop_faction_type = "sec_separatist_96"
		# is_pop_faction_type = "sec_separatist_97"
		# is_pop_faction_type = "sec_separatist_98"
		# is_pop_faction_type = "sec_separatist_99"
		# is_pop_faction_type = "sec_separatist_100"
	}
}

is_iso_sector_separatist_faction = {
	OR = {
		has_pop_faction_flag = iso_sector_faction
		##########################################
		is_pop_faction_type = sec_iso_separatist_1
		is_pop_faction_type = sec_iso_separatist_2
		is_pop_faction_type = sec_iso_separatist_3
		is_pop_faction_type = sec_iso_separatist_4
		is_pop_faction_type = sec_iso_separatist_5
		is_pop_faction_type = sec_iso_separatist_6
		is_pop_faction_type = sec_iso_separatist_7
		is_pop_faction_type = sec_iso_separatist_8
		is_pop_faction_type = sec_iso_separatist_9
		is_pop_faction_type = sec_iso_separatist_10
		is_pop_faction_type = sec_iso_separatist_11
		is_pop_faction_type = sec_iso_separatist_12
		is_pop_faction_type = sec_iso_separatist_13
		is_pop_faction_type = sec_iso_separatist_14
		is_pop_faction_type = sec_iso_separatist_15
		is_pop_faction_type = sec_iso_separatist_16
		is_pop_faction_type = sec_iso_separatist_17
		is_pop_faction_type = sec_iso_separatist_18
		is_pop_faction_type = sec_iso_separatist_19
		is_pop_faction_type = sec_iso_separatist_20
		is_pop_faction_type = sec_iso_separatist_21
		is_pop_faction_type = sec_iso_separatist_22
		is_pop_faction_type = sec_iso_separatist_23
		is_pop_faction_type = sec_iso_separatist_24
		is_pop_faction_type = sec_iso_separatist_25
		is_pop_faction_type = sec_iso_separatist_26
		is_pop_faction_type = sec_iso_separatist_27
		is_pop_faction_type = sec_iso_separatist_28
		is_pop_faction_type = sec_iso_separatist_29
		is_pop_faction_type = sec_iso_separatist_30
	}
}

is_nationalist_faction = {
	OR = {
		has_pop_faction_flag = nat_faction
		##########################################
		is_pop_faction_type = "nat_separatist_1"
		is_pop_faction_type = "nat_separatist_2"
		is_pop_faction_type = "nat_separatist_3"
		is_pop_faction_type = "nat_separatist_4"
		is_pop_faction_type = "nat_separatist_5"
		is_pop_faction_type = "nat_separatist_6"
		is_pop_faction_type = "nat_separatist_7"
		is_pop_faction_type = "nat_separatist_8"
		is_pop_faction_type = "nat_separatist_9"
		is_pop_faction_type = "nat_separatist_10"
		is_pop_faction_type = "nat_separatist_12"
		is_pop_faction_type = "nat_separatist_13"
		is_pop_faction_type = "nat_separatist_14"
		is_pop_faction_type = "nat_separatist_15"
		is_pop_faction_type = "nat_separatist_16"
		is_pop_faction_type = "nat_separatist_17"
		is_pop_faction_type = "nat_separatist_18"
		is_pop_faction_type = "nat_separatist_19"
		is_pop_faction_type = "nat_separatist_20"
		is_pop_faction_type = "nat_separatist_21"
		is_pop_faction_type = "nat_separatist_22"
		is_pop_faction_type = "nat_separatist_23"
		is_pop_faction_type = "nat_separatist_24"
		is_pop_faction_type = "nat_separatist_25"
		is_pop_faction_type = "nat_separatist_26"
		is_pop_faction_type = "nat_separatist_27"
		is_pop_faction_type = "nat_separatist_28"
		is_pop_faction_type = "nat_separatist_29"
		is_pop_faction_type = "nat_separatist_30"
		is_pop_faction_type = "nat_separatist_31"
		is_pop_faction_type = "nat_separatist_32"
		is_pop_faction_type = "nat_separatist_33"
		is_pop_faction_type = "nat_separatist_34"
		is_pop_faction_type = "nat_separatist_35"
		is_pop_faction_type = "nat_separatist_36"
		is_pop_faction_type = "nat_separatist_37"
		is_pop_faction_type = "nat_separatist_38"
		is_pop_faction_type = "nat_separatist_39"
		is_pop_faction_type = "nat_separatist_40"
		is_pop_faction_type = "nat_separatist_41"
		is_pop_faction_type = "nat_separatist_42"
		is_pop_faction_type = "nat_separatist_43"
		is_pop_faction_type = "nat_separatist_44"
		is_pop_faction_type = "nat_separatist_45"
		is_pop_faction_type = "nat_separatist_46"
		is_pop_faction_type = "nat_separatist_47"
		is_pop_faction_type = "nat_separatist_48"
		is_pop_faction_type = "nat_separatist_49"
		is_pop_faction_type = "nat_separatist_50"
		is_pop_faction_type = "nat_separatist_51"
		is_pop_faction_type = "nat_separatist_52"
		is_pop_faction_type = "nat_separatist_53"
		is_pop_faction_type = "nat_separatist_54"
		is_pop_faction_type = "nat_separatist_55"
		is_pop_faction_type = "nat_separatist_56"
		is_pop_faction_type = "nat_separatist_57"
		is_pop_faction_type = "nat_separatist_58"
		is_pop_faction_type = "nat_separatist_59"
		is_pop_faction_type = "nat_separatist_60"
		is_pop_faction_type = "nat_separatist_61"
		is_pop_faction_type = "nat_separatist_62"
		is_pop_faction_type = "nat_separatist_63"
		is_pop_faction_type = "nat_separatist_64"
		is_pop_faction_type = "nat_separatist_65"
		is_pop_faction_type = "nat_separatist_66"
		is_pop_faction_type = "nat_separatist_67"
		is_pop_faction_type = "nat_separatist_68"
		is_pop_faction_type = "nat_separatist_69"
		is_pop_faction_type = "nat_separatist_70"
		is_pop_faction_type = "nat_separatist_71"
		is_pop_faction_type = "nat_separatist_72"
		is_pop_faction_type = "nat_separatist_73"
		is_pop_faction_type = "nat_separatist_74"
		is_pop_faction_type = "nat_separatist_75"
		is_pop_faction_type = "nat_separatist_76"
		is_pop_faction_type = "nat_separatist_77"
		is_pop_faction_type = "nat_separatist_78"
		is_pop_faction_type = "nat_separatist_79"
		is_pop_faction_type = "nat_separatist_80"
		is_pop_faction_type = "nat_separatist_81"
		is_pop_faction_type = "nat_separatist_82"
		is_pop_faction_type = "nat_separatist_83"
		is_pop_faction_type = "nat_separatist_84"
		is_pop_faction_type = "nat_separatist_85"
		is_pop_faction_type = "nat_separatist_86"
		is_pop_faction_type = "nat_separatist_87"
		is_pop_faction_type = "nat_separatist_88"
		is_pop_faction_type = "nat_separatist_89"
		is_pop_faction_type = "nat_separatist_90"
		is_pop_faction_type = "nat_separatist_91"
		is_pop_faction_type = "nat_separatist_92"
		is_pop_faction_type = "nat_separatist_93"
		is_pop_faction_type = "nat_separatist_94"
		is_pop_faction_type = "nat_separatist_95"
		is_pop_faction_type = "nat_separatist_96"
		is_pop_faction_type = "nat_separatist_97"
		is_pop_faction_type = "nat_separatist_98"
		is_pop_faction_type = "nat_separatist_99"
		is_pop_faction_type = "nat_separatist_100"
	}
}

pop_can_be_separatist_gen = {

	pop_has_happiness = yes
	can_think = yes
	pop_was_saved = no
	NOT = { has_pop_flag = sep_pop }
}

pop_was_saved = {
	OR = {
		has_modifier = pop_saved_from_slavery
		has_modifier = pop_saved_from_purge
	}
}

get_cit_res_thrall = {
	OR = {
		has_citizenship_type = { type = citizenship_full }
		has_citizenship_type = { type = citizenship_limited }
		has_slavery_type = { type = slavery_military }
	}
}

frontier_planet_unrest_tick_check_gen = {
	if = {
		limit = { exists = sector }
		sector = { NOT = { has_sector_flag = sector_sep_active } }
	}
	has_planet_flag = frontier_planet_@root
	NOT = { has_planet_flag = plan_sep_active }
	count_owned_pop = {
		limit = {
			can_think = yes
			pop_has_happiness = yes
		}
		count >= 3
	}
	is_colony = yes
	is_occupied_flag = no
	has_orbital_bombardment = no
	NOT = { planet_devastation >= 15 }
	OR = {
		planet_stability <= 30
		AND = {
			planet_crime  >= 60
			OR = {
				NOT = { exists = sector.leader }
				AND = {
					exists = sector.leader
					sector.leader = { NOT = { has_trait = leader_trait_corrupt } }
				}
			}
		}
	}
	NOT = { has_planet_flag = recent_sep_rebellion }
	is_capital = no
}

integrated_planet_unrest_tick_check_gen = {
	if = {
		limit = { exists = sector }
		sector = { NOT = { has_sector_flag = sector_sep_active } }
	}
	has_planet_flag = integrated_planet_@root
	NOT = { has_planet_flag = plan_sep_active }
	count_owned_pop = {
		limit = {
			can_think = yes
			pop_has_happiness = yes
		}
		count >= 5
	}
	is_colony = yes
	is_occupied_flag = no
	has_orbital_bombardment = no
	NOT = { planet_devastation >= 15 }
	OR = {
		planet_stability <= 25
		AND = {
			planet_crime  >= 70
			OR = {
				NOT = { exists = sector.leader }
				AND = {
					exists = sector.leader
					sector.leader = { NOT = { has_trait = leader_trait_corrupt } }
				}
			}
		}
	}
	NOT = { has_planet_flag = recent_sep_rebellion }
	is_capital = no
}

fundamental_planet_unrest_tick_check_gen = {
	if = {
		limit = { exists = sector }
		sector = { NOT = { has_sector_flag = sector_sep_active } }
	}
	has_planet_flag = fundamental_planet_@root
	NOT = { has_planet_flag = plan_sep_active }
	count_owned_pop = {
		limit = {
			can_think = yes
			pop_has_happiness = yes
		}
		count >= 10
	}
	is_colony = yes
	is_occupied_flag = no
	has_orbital_bombardment = no
	NOT = { planet_devastation >= 15 }
	OR = {
		planet_stability <= 20
		AND = {
			planet_crime  >= 80
			OR = {
				NOT = { exists = sector.leader }
				AND = {
					exists = sector.leader
					sector.leader = { NOT = { has_trait = leader_trait_corrupt } }
				}
			}
		}
	}
	NOT = { has_planet_flag = recent_sep_rebellion }
	is_capital = no
}

frontier_planet_unrest_untick_check_gen = {
	has_planet_flag = frontier_planet_@root
	planet_stability > 30
	OR = {
		planet_crime < 60
		AND = {
			exists = sector.leader
			sector.leader = {
				has_trait = leader_trait_corrupt
			}
		}
	}
}

integrated_planet_unrest_untick_check_gen = {
	has_planet_flag = integrated_planet_@root
	planet_stability > 25
	OR = {
		planet_crime < 70
		AND = {
			exists = sector.leader
			sector.leader = {
				has_trait = leader_trait_corrupt
			}
		}
	}
}

fundamental_planet_unrest_untick_check_gen = {
	has_planet_flag = fundamental_planet_@root
	planet_stability > 20
	OR = {
		planet_crime < 80
		AND = {
			exists = sector.leader
			sector.leader = {
				has_trait = leader_trait_corrupt
			}
		}
	}
	
}

combined_planet_unrest_calm_check_gen = {
	OR = {
		frontier_planet_unrest_untick_check_gen = yes
		check_variable = { which = revolt_tick value = 6 }
	}
	OR = {
		integrated_planet_unrest_untick_check_gen = yes
		check_variable = { which = revolt_tick value = 7 }
	}
	OR = {
		fundamental_planet_unrest_untick_check_gen = yes
		check_variable = { which = revolt_tick value = 8 }
	}
}

combined_planet_unrest_calm_retick_check_gen = {
	is_variable_set = calm_tick
	check_variable = { which = calm_tick value > 0 }
	OR = {
		AND = {
			has_planet_flag = frontier_planet_@root
			OR = {
				planet_stability <= 30
				AND = {
					planet_crime  >= 60
					OR = {
						NOT = { exists = sector.leader }
						AND = {
							exists = sector.leader
							sector.leader = { NOT = { has_trait = leader_trait_corrupt } }
						}
					}
				}
			}
		}
		AND = {
			has_planet_flag = integrated_planet_@root
			OR = {
				planet_stability <= 25
				AND = {
					planet_crime  >= 70
					OR = {
						NOT = { exists = sector.leader }
						AND = {
							exists = sector.leader
							sector.leader = { NOT = { has_trait = leader_trait_corrupt } }
						}
					}
				}

			}
		}
		AND = {
			has_planet_flag = fundamental_planet_@root
			OR = {
				planet_stability <= 20
				AND = {
					planet_crime  >= 80
					OR = {
						NOT = { exists = sector.leader }
						AND = {
							exists = sector.leader
							sector.leader = { NOT = { has_trait = leader_trait_corrupt } }
						}
					}
				}
			}
		}
	}
}

combined_sector_unrest_calm_retick_check_gen = {
	is_variable_set = calm_tick
	check_variable = { which = calm_tick value > 0 }
	OR = {
		AND = {
			has_sector_flag = frontier_sector_@root
			any_owned_planet = {
				OR = {
					planet_stability <= 30
					AND = {
						planet_crime  >= 60
						OR = {
							NOT = { exists = sector.leader }
							AND = {
								exists = sector.leader
								sector.leader = { NOT = { has_trait = leader_trait_corrupt } }
							}
						}
					}
				}
			}
		}
		AND = {
			has_sector_flag = integrated_sector_@root
			any_owned_planet = {
				OR = {
					planet_stability <= 25
					AND = {
						planet_crime  >= 70
						OR = {
							NOT = { exists = sector.leader }
							AND = {
								exists = sector.leader
								sector.leader = { NOT = { has_trait = leader_trait_corrupt } }
							}
						}
					}
				}
			}
		}
		AND = {
			has_sector_flag = fundamental_sector_@root
			any_owned_planet = {
				OR = {
					planet_stability <= 20
					AND = {
						planet_crime  >= 80
						OR = {
							NOT = { exists = sector.leader }
							AND = {
								exists = sector.leader
								sector.leader = { NOT = { has_trait = leader_trait_corrupt } }
							}
						}
					}
				}
			}
		}
	}
}

# Faction Triggers

is_pacifist_faction = {
	OR = {
		is_pop_faction_type = prosperity
		is_pop_faction_type = activist
		is_pop_faction_type = industrialist
	}
}

is_militarist_faction = {
	OR = {
		is_pop_faction_type = imperialist
		is_pop_faction_type = survivalist
		is_pop_faction_type = warmaker
	}
}

is_materialist_faction = {
	OR = {
		is_pop_faction_type = technologist
		is_pop_faction_type = perfectionist
		is_pop_faction_type = adopter
	}
}

is_spiritualist_faction = {
	OR = {
		is_pop_faction_type = traditionalist
		is_pop_faction_type = crusader
		is_pop_faction_type = shepherd
	}
}

is_egalitarian_faction = {
	OR = {
		is_pop_faction_type = progressive
		is_pop_faction_type = elitist
		is_pop_faction_type = labourite
	}
}

is_authoritarian_faction = {
	OR = {
		is_pop_faction_type = totalitarian
		is_pop_faction_type = indentured
		is_pop_faction_type = aristocrat
	}
}

is_xenophile_faction = {
	OR = {
		is_pop_faction_type = xenoist
		is_pop_faction_type = holistic
		is_pop_faction_type = warmaker
	}
}

is_xenophobe_faction = {
	OR = {
		is_pop_faction_type = supremacist
		is_pop_faction_type = isolationist
		is_pop_faction_type = enslaver
	}
}

is_ecologist_faction = {
 	is_pop_faction_type = environmentalists
}

is_industrial_faction = {
 	is_pop_faction_type = manufacturers
}

is_socialism_faction = {
	is_pop_faction_type = socialists
}

is_capitalism_faction = {
	is_pop_faction_type = bankers
}

is_pluralist_faction = {
 	is_pop_faction_type = labourites
}

is_elitist_faction = {
 	is_pop_faction_type = conservatives
}

# Ethics and Civics Overwrites/Backups
is_ecologist = {
 	OR = {
 		has_ethic = ethic_fanatic_green
 		has_ethic = ethic_green
 	}
}

is_socialism = {
	OR = {
		has_ethic = ethic_fanatic_socialism
		has_ethic = ethic_socialism
	}
}

is_socialist = {
	is_socialism = yes
}

is_capitalism = {
	OR = {
		has_ethic = ethic_fanatic_capitalism
		has_ethic = ethic_capitalism
	}
}

is_capitalist = {
	is_capitalism = yes
}

is_pluralist = {
 	OR = {
 		has_ethic = ethic_fanatic_pluralist
 		has_ethic = ethic_pluralist
 	}
}

is_ethic_situation = {
	OR = {
		is_situation_type = situation_civstrife_faction_egal
		is_situation_type = situation_civstrife_faction_auth
		is_situation_type = situation_civstrife_faction_mil
		is_situation_type = situation_civstrife_faction_pac
		is_situation_type = situation_civstrife_faction_mat
		is_situation_type = situation_civstrife_faction_spi
		is_situation_type = situation_civstrife_faction_phile
		is_situation_type = situation_civstrife_faction_phobe
		is_situation_type = situation_civstrife_faction_soc
		is_situation_type = situation_civstrife_faction_cap
		is_situation_type = situation_civstrife_faction_indus
		is_situation_type = situation_civstrife_faction_eco
		is_situation_type = situation_civstrife_faction_elite
		is_situation_type = situation_civstrife_faction_plur
	}
}

# For My Sanity

get_sector_leader_test = {
	exists = solar_system
	solar_system = {
		exists = sector
		sector = {
			root.target = {
				any_owned_pop = {
					sector = { is_same_value = prevprevprev }
				}
			}
		}
	}
}

is_modded_ship = {
	OR = {
		# Gigastructures
		is_ship_size = giga_massive_planet
		is_ship_size = giga_planet_behemoth
		is_ship_size = giga_systemcraft
		is_ship_size = space_dragon_origin
		is_ship_size = space_dragon_origin_baby
		is_ship_size = space_amoeba_centenarian
		is_ship_size = space_whale_1
		is_ship_size = space_whale_2
		is_ship_size = space_whale_3
		is_ship_size = space_whale_4
		# Engineers of Life
		is_ship_size = eng_imp_stellar_devourer
		is_ship_size = eng_imp_dimensional_horror
		is_ship_size = eng_imp_space_dragon
		is_ship_size = eng_imp_space_dragon_baby
		is_ship_size = eng_imp_leviathan_01_voidspawn
		is_ship_size = eng_imp_void_cloud_lesser
		is_ship_size = eng_imp_void_cloud
		is_ship_size = eng_imp_corrupted_avatar
		is_ship_size = eng_imp_shardlings
		is_ship_size = eng_imp_shards
		is_ship_size = eng_imp_quintessence
		is_ship_size = eng_imp_crystal_station_large
		is_ship_size = eng_imp_space_whale_calf
		is_ship_size = eng_imp_space_whale_cow
		is_ship_size = eng_imp_space_whale_bull
		is_ship_size = eng_imp_leviathan_01_elder_tiyanki
		is_ship_size = eng_imp_amoeba
		is_ship_size = eng_imp_mother
		is_ship_size = eng_imp_cente
	}
}

# Overwrites

is_unfriendly = {
	OR = {
		has_valid_civic = civic_fanatic_purifiers
		has_valid_civic = civic_barbaric_despoilers
		has_valid_civic = civic_machine_terminator
		has_valid_civic = civic_machine_assimilator
		has_valid_civic = civic_hive_devouring_swarm	
	}
}

federation_check_for_subject_trigger = {
	custom_tooltip = {
		fail_text = same_federation_as_overlord
		OR = {
			has_federation = no
			is_subject = no
			AND = {
				is_subject = yes
				NOT = { any_agreement = { agreement_preset = preset_exile_government } }
				is_in_federation_with = overlord
			}
		}
	}
}